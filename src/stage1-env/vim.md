---
title: 使用vim
icon: gears
order: 1
category:
  - 第一阶段 - 开发环境
tag:
  - vim
---

目标: 熟悉vim基础使用方法，及进阶操作。

## vim安装
- 可以使用`git bash`中自带的`vim`
- windows上可以安装[gvim](http://dl.softmgr.qq.com/original/Development/gvim81-8.1.282.0.exe)
- ubuntu下安装`sudo apt install vim`

## 正则表达式
- [vimregex](https://vimregex.com/)

## 常用操作
| key/cmd | desc |
| -- | -- |
| <kbd>ESC</kbd> | 回到正常模式 |
| <kbd>h, j, k, l</kbd> | 正常模式，`左下上右`移动光标 |
| <kbd>w</kbd> | 正常模式，向后移动一个词 |
| <kbd>b</kbd> | 正常模式，向前移动一个词 |
| <kbd>f</kbd> +`a` | 正常模式，本行中向后跳到第一个出现`a`的地方 |
| <kbd>%</kbd> | 正常模式，跳转到匹配字符，比如`()`, `[]` |
| <kbd>ctrl-u</kbd> | 正常模式，向上翻半页 |
| <kbd>ctrl-d</kbd> | 正常模式，向上翻半页 |
| <kbd>ctrl-o</kbd> | 正常模式下, 跳转到上一次编辑的地方 |
| <kbd>^</kbd> | 正常模式，移到行首第一个字符 |
| <kbd>0</kbd> | 正常模式，移到行首 |
| <kbd>$</kbd> | 正常模式，移到行尾 |
| <kbd>i</kbd> | 正常模式下，在当前光标位置插入，经入编辑模式 |
| <kbd>o</kbd> | 正常模式下，在当前行的下一行，新开一行开始编辑 |
| <kbd>O</kbd> | 正常模式下，在当前行的上一行，新开一行开始编辑 |
| <kbd>x</kbd> | 正常模式下，删除当前光标位置字符 |
| <kbd>dd</kbd> | 正常模式下，删除当前行，并放入缓冲区 |
| <kbd>yy</kbd> | 正常模式下, 复制当前行，并放入缓冲区 |
| <kbd>p</kbd> | 正常模式下, 粘贴缓冲区内容 |
| <kbd>u</kbd> | 正常模式，undo撤销上一个操作 |
| <kbd>shift+"</kbd> <kbd>shift++</kbd> <kbd>y</kbd> | 正常模式下, 粘贴缓冲区内容 |
| <kbd>v</kbd> | 正常模式下, 进入可视模式（类似鼠标选择）。然后可以使用拷贝、剪贴等操作。 |
| <kbd>V</kbd> | 正常模式下, 进入可视模式（类似鼠标选择）。行选择。 |
| <kbd>V</kbd><kbd>:</kbd> | 行选择, 对多行执行命令。比如选择多行后，使用`:s/xx/yy/g`对选择行做字符串替换 |
| <kbd>ctrl-v</kbd> | 正常模式下, 进入可视模式（类似鼠标选择）。块选择，然后按<kbd>I</kbd>进行多行编辑，按<kbd>ESC</kbd>推出 |
| <kbd>ctrl-g</kbd> | 正常模式下, 显示当前编辑文件 |
| `:w` | 正常模式下, 保存 |
| `:w /path/to/file` | 正常模式下, 保存到文件 |
| `:q` | 推出当前屏 |
| `:qa` | 退出所有屏 |
| `:wq`，`:wqa` | 保存退出 |
| `:q!`| 不保存退出 |

## 进阶使用

### 分屏
| key/cmd | desc |
| -- | -- |
| `:vs` | 正常模式下, 左右分屏。(vertical split) |
| `:sp` | 正常模式下, 上下分屏。(split) |
| <kbd>ctrl+w</kbd><kbd>h,j,k,l</kbd> | 正常模式下, 分屏间上下左右跳屏 |
| <kbd>ctrl+w</kbd><kbd><,></kbd> | 正常模式下, 分屏窗口左右（宽度）大小调整 |
| <kbd>ctrl+w</kbd><kbd>+,-</kbd> | 正常模式下, 分屏窗口上下（高度）大小调整 |
| <kbd>ctrl+w</kbd><kbd>=</kbd> | 分屏下，窗口大小重新矫正。 |
| `:q` | 关闭当前分屏 |
| `:qa` | 退出所有 |

### 多文件
| key/cmd | desc |
| -- | -- |
| `:e` | 在`vim`中重新打开当前文件 |
| `:e /path/to/file` | 在`vim`中打开文件 |
| `:ls` | 列出当前所有打开的文件 |
| `:bn` | 显示但前vim打开的文件列表中的下一个文件 |
| `:bp` | 显示但前vim打开的文件列表中的上一个文件 |
| `:b1` | 切换到文件，`1`是`:ls`下的文件编号1 |
| `:bd 1` | 关闭打开的文件，`1`是`:ls`下的文件编号1 |

### 执行系统命令
| key/cmd | desc |
| -- | -- |
| `:!echo xxx`| 使用`!`开头, 执行系统命令 |
| `:r !which bash`| 在当前光标位置插入命令结果`/bin/bash` |
| `:% !xxd` | `%`表示全文，这里表示把全文放入`xxd`命令 |
| `:% !xxd -r` | `%`表示全文，这里表示把全文放入`xxd`命令的`reverse`反响操作。`xxd`可以看作是二进制编辑/查看小工具 |
| `:% !sudo tee %` | 这个在linux下也好用。当你编辑文件后保存，却没有保存权限。可以借用`sudo`提权，用`tee`工具保存 |

### 搜索替换
| key/cmd | desc |
| -- | -- |
| <kbd>/</kbd> | 搜索，后面跟正则表达式。<kbd>n</kbd>继续搜索下一个位置，<kbd>N</kbd>继续搜索上一个位置|
| <kbd>shift-*</kbd> | 搜索当前光标所在的字符串 |
| <kbd>/abc\c</kbd> | 搜索，后面的`\c`表示大小写不敏感。这是正则表达式的范畴 |
| `:%s/正则表达式/目标字符串/g` | 全文替换，按行搜索, `g`表示一行中出现多次的也要替换 |
| `:%s/正则表达式/目标字符串/gc` | 替换，`c`表示`confirm`，每次替换前让你确认 |
| `:%g/正则表达式/d` | 删除匹配行，`g`表示行命令，`d`表示删除`delete`。类似`grep` |
| `:%g!/正则表达式/d` | 除匹配行外，删除其它行。类似`grep -V` |

### 代码相关
| key/cmd | desc |
| -- | -- |
| `:set ts=4` | 表示`tab space`, 一个`tab`等于`4`个空格 |
| `:set sw=4` | 表示按`4`个空格缩进 |
| `:expandtab` | 以后编辑，使用空格代替`tab`。本来已有的`tab`不管 |
| `:% retab!` | 将全文的`tab`替换为空格 |
| `:set nu` | 显示行号 |
| `:set nu!` | 关闭显示行号 |
| `:set list` | 显示特殊字符，比如换行符 |
| `:set list!` | 隐藏特殊字符，比如换行符 |
| `:set hls` | 搜索字符高亮 |
| `:syntax on` | 语法高亮 |
| <kbd>V</kbd>选择多行，然后用<kbd><,></kbd> | 多行缩进修改 |
| <kbd>ctrl-n</kbd> | complete操作，自动补全（以前出现过的单词字符串）。更多的IDE特性，你们还是上插件扩展 |
| <kbd>g</kbd><kbd>U</kbd><kbd>w</kbd> | 将后面的单词改为大小，小写用小`u`。`w`表示向后一个单词 |
| 10 <kbd>i</kbd> `-` <kbd>ESC</kbd> | 10表示执行10次,I插入`-`,就可以1次插入10个字符 |
